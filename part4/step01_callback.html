<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>callBack</title>
</head>
<body>

<script>
  function testA(callback) {

      callback();
  }

  //콜백 함수
  function testB() {
	console.log('callback');
  }

  testA(testB);

  //동기 vs 비동기

  //동기
  console.log(1);
  console.log(2);
  console.log(3);

  [1,2,3].forEach((num)=>{
      console.log(num);
  });

  //비동기
  // [1,2,3].forEach((num)=>{
  //     setTimeout(()=>{
  //         console.log(num);
  //     },3000)
  // })

  // console.log(1);   //동기
  // setTimeout(()=>console.log(2),1000); //비동기
  // console.log(3);   //동기

  //AnSync vs thread
  //javascript 단일 스레드
  //web api에서 제공하는 기능 때문에 다중 thread처럼 움직인다


  console.log('----------------------------------------------')
  //콜백
  // function func(){
  //     console.log(1);   //동기
  //     setTimeout(()=>console.log(2), 0); //비동기
  //     console.log(3);   //동기
  //
  // }

  // func();

  //132 -> 123?
	//해법 1 => 콜백 지옥
  // function func1(func){
  //     setTimeout(()=>{
  //         console.log(1);
  //         setTimeout(()=>{
  //             console.log(2)
  //             setTimeout(()=>{
  //                 console.log(3)
  //             },0)
  //         },0)
  //         }, 0)
  // }

  //콜백 지옥을 해결? -> promise
  const promise = new Promise((resolve, reject) => {
    console.log(1);
    // setTimeout(() =>{
    //     console.log(2);
    // }, 1000 )


  }).then(() => {
     return new Promise((resolve, reject) => {
         setTimeout(() => {
             console.log(2);
             resolve();
         },0)

     });
  } )
  .then(() => {
      console.log(3);
  })

  const promise1 = new Promise((resolve,reject) => {
      setTimeout(()=> {
          console.log('promise');
          resolve('data');
      })
  })

  promise1
	  .then(v => console.log(v))
	  .then(() => console.log(2))
	  .then(() => console.log(3))
	  .catch(err => {console.error(err)})


</script>
</body>
</html>